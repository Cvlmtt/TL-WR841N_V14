services:
  client:
    build:
      context: ./client
    # This command runs a script that executes the client and then hangs,
    # to prevent the container from stopping after the client daemonizes.
    command: ["./run_client.sh"]
    # The client application has a hardcoded IP address (10.122.91.29).
    # The 'extra_hosts' directive below maps this IP to 'host-gateway',
    # which resolves to the host machine's internal IP address.
    # This effectively redirects the client's connection attempt to your host.
    extra_hosts:
      - "10.122.91.29:host-gateway"